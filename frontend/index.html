<!doctype html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <title>CodePen - Animated Login Form using Html &amp; CSS Only</title>

    <link rel="stylesheet" href="./style.css">

</head>

<body> <!-- partial:index.partial.html -->

    <section> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span>

        <div id="signinPage" class="signin">

            <div class="content">

                <h2>Sign In</h2>

                <div class="form">

                    <div class="inputBox">

                        <input type="text" id="loginUsername" required> <i>Username</i>

                    </div>

                    <div class="inputBox">

                        <input type="password" id="loginPassword" required> <i>Password</i>

                    </div>

                    <div class="links"> <a href="#">Forgot Password</a> <a onclick="showRegistrationPage()"
                            href="#">Register</a>

                    </div>

                    <div class="inputBox">

                        <input onclick="login()" type="submit" value="Login">

                    </div>

                </div>

            </div>

        </div>

        <div id="registrationPage" class="registration" style="display: none;">

            <div class="content">

                <h2>Register</h2>

                <div class="form">

                    <div class="inputBox">

                        <input type="text" id="registerUsername" required> <i>Username</i>

                    </div>

                    <div class="inputBox">

                        <input type="password" id="registerPassword" required> <i>Password</i>

                    </div>

                    <div class="links"> <a href="#">Cancel</a> <a href="#">Sign In</a>

                    </div>

                    <div class="inputBox">

                        <input type="submit" onclick="register()" value="Confirm">

                    </div>

                </div>

            </div>

        </div>

    </section> <!-- partial -->
    <script>
        var url = 'http://localhost:3000'
        function login() {
            var username = document.getElementById("loginUsername").value;
            var password = document.getElementById("loginPassword").value;
            console.log(username)
            console.log(password)
            fetch(`${url}/auth/login`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    'username': username,
                    'password': password
                })
            }).then(response => {
                console.log(response)
                return response.json();
            }).catch(error => {
                console.log('Error: ', error)
            }).then(data => {
                console.log(data)
            })

        }
        function register() {
            var username = document.getElementById("registerUsername").value;
            var password = document.getElementById("registerPassword").value;
            fetch(`${url}/users/new`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    'username': username,
                    'password': password
                })
            }).then(response => {
                console.log(response)
                if (response.status == 201) {
                    alert('Registered successfully');
                    document.getElementById("registrationPage").style.display = "none";
                    document.getElementById("signinPage").style.display = "block";
                }
            }).catch(error => {
                console.log('Error: ', error)
            })
            // Implement user registration logic here
            // You may want to send the registration data to a server or store it locally
            // After registration, you can show the room selection page similar to the login flow
            // document.getElementById("registrationPage").style.display = "none";
            // document.getElementById("roomPage").style.display = "block";
            // document.getElementById("loggedInUsername").innerText = username;
        }

        function showRegistrationPage() {
            console.log(document.getElementById("signinPage"))
            console.log(document.getElementById("registrationPage"))
            document.getElementById("signinPage").style.display = "none";
            document.getElementById("registrationPage").style.display = "block";
        }
    </script>

</body>

</html>